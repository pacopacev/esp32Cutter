; Common settings for both environments
[env:common_settings]
platform = espressif32
board = nodemcu-32s
framework = espidf
monitor_speed = 115200
board_build.flash_size = 2MB
board_build.flash_mode = dio
board_build.flash_freq = 40m
board_build.partitions = partitions_2MB.csv
build_type = release
lib_ldf_mode = deep

; ========== USB FLASHING ENVIRONMENT ==========
[env:usb]
extends = env:common_settings
upload_protocol = esptool
upload_port = COM3  ; Change to your actual COM port
upload_speed = 921600

; ========== OTA FLASHING ENVIRONMENT ==========
[env:ota]
extends = env:common_settings
upload_protocol = custom
upload_port = 192.168.1.75  ; Change to your ESP32's IP
upload_flags =
    --port=3232
upload_command = curl -X POST http://$UPLOAD_PORT:3232 --data-binary "@$SOURCE"